import{A as d,Aa as j,F as C,I as f,Ja as F,Ma as U,Na as $,O as p,Ra as R,T as V,Ua as q,Xa as z,Y as P,Ya as B,Za as H,_ as w,aa as L,ba as N,bb as Y,ca as x,da as n,ea as i,fa as y,g as S,hb as G,ib as J,ja as _,jb as K,la as a,na as m,oa as k,s as I,sa as c,t as h,ta as v,u as T,wa as A,x as D,z as l}from"./chunk-XE4WQH5G.js";var E=class u{http=D($);apiUrl=`${K.apiUrl}/api/projects`;projectsSubject=new S([]);projects$=this.projectsSubject.asObservable();loadProjects(){this.http.get(this.apiUrl).subscribe({next:e=>{this.projectsSubject.next(e)},error:e=>{console.error("Error loading projects:",e)}})}getProjects(e){let t=new U;return e&&(t=t.set("teamId",e.toString())),this.http.get(this.apiUrl,{params:t})}getProject(e){return this.http.get(`${this.apiUrl}/${e}`)}createProject(e){return this.http.post(this.apiUrl,e).pipe(I(t=>{let r=this.projectsSubject.value;this.projectsSubject.next([...r,t])}))}updateProject(e,t){return this.http.patch(`${this.apiUrl}/${e}`,t)}deleteProject(e){return this.http.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(t){return new(t||u)};static \u0275prov=T({token:u,factory:u.\u0275fac,providedIn:"root"})};function M(u,e){let r=!e?.manualCleanup?e?.injector?.get(C)??D(C):null,o=X(e?.equal),s;e?.requireSync?s=f({kind:0},{equal:o}):s=f({kind:1,value:e?.initialValue},{equal:o});let b,O=u.subscribe({next:g=>s.set({kind:1,value:g}),error:g=>{s.set({kind:2,error:g}),b?.()},complete:()=>{b?.()}});if(e?.requireSync&&s().kind===0)throw new h(601,!1);return b=r?.onDestroy(O.unsubscribe.bind(O)),j(()=>{let g=s();switch(g.kind){case 1:return g.value;case 2:throw g.error;case 0:throw new h(601,!1)}},{equal:e?.equal})}function X(u=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&u(e.value,t.value)}var Z=u=>["/projects",u,"tasks"],ee=(u,e)=>e.id;function te(u,e){if(u&1){let t=_();n(0,"div",11)(1,"div",14)(2,"div",15)(3,"span",6),c(4,"folder_open"),i()(),n(5,"div",16)(6,"h3"),c(7),i(),n(8,"p"),c(9),i()()(),n(10,"div",17)(11,"button",18),a("click",function(){let o=l(t).$implicit,s=m();return d(s.onEditProject(o))}),n(12,"span",6),c(13,"edit_square"),i()(),n(14,"button",19),a("click",function(){let o=l(t).$implicit,s=m();return d(s.onDeleteProject(o.id))}),n(15,"span",6),c(16,"delete"),i()()()()}if(u&2){let t=e.$implicit;p(),x("routerLink",A(3,Z,t.id)),p(6),v(t.name),p(2),v(t.description||"\u05D0\u05D9\u05DF \u05EA\u05D9\u05D0\u05D5\u05E8 \u05DC\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05D6\u05D4... \u05D4\u05D2\u05D9\u05E2 \u05D4\u05D6\u05DE\u05DF \u05DC\u05D4\u05D5\u05E1\u05D9\u05E3 \u05D0\u05D7\u05D3!")}}function ne(u,e){u&1&&(n(0,"div",12)(1,"span",20),c(2,"inventory_2"),i(),n(3,"p"),c(4,"\u05E2\u05D3\u05D9\u05D9\u05DF \u05D0\u05D9\u05DF \u05E4\u05E8\u05D5\u05D9\u05E7\u05D8\u05D9\u05DD \u05D1\u05E6\u05D5\u05D5\u05EA \u05D4\u05D6\u05D4. \u05E6\u05D5\u05E8 \u05D0\u05EA \u05D4\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05D4\u05E8\u05D0\u05E9\u05D5\u05DF \u05E9\u05DC\u05DA \u05DC\u05DE\u05E2\u05DC\u05D4!"),i()())}function re(u,e){if(u&1){let t=_();n(0,"div",21),a("click",function(){l(t);let o=m();return d(o.onCancelEdit())}),n(1,"div",22),a("click",function(o){return l(t),d(o.stopPropagation())}),n(2,"div",23)(3,"span",6),c(4,"edit_note"),i(),n(5,"h3"),c(6,"\u05E2\u05E8\u05D9\u05DB\u05EA \u05E4\u05E8\u05D5\u05D9\u05E7\u05D8"),i()(),n(7,"div",24)(8,"div",25)(9,"label"),c(10,"\u05E9\u05DD \u05D4\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8"),i(),y(11,"input",26,0),i(),n(13,"div",25)(14,"label"),c(15,"\u05EA\u05D9\u05D0\u05D5\u05E8 \u05D4\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8"),i(),n(16,"textarea",27,1),c(18),i()()(),n(19,"div",28)(20,"button",29),a("click",function(){l(t);let o=m();return d(o.onCancelEdit())}),c(21,"\u05D1\u05D9\u05D8\u05D5\u05DC"),i(),n(22,"button",30),a("click",function(){l(t);let o=k(12),s=k(17),b=m();return d(b.onSaveProject({name:o.value,description:s.value}))}),c(23," \u05E9\u05DE\u05D5\u05E8 \u05E9\u05D9\u05E0\u05D5\u05D9\u05D9\u05DD "),i()()()()}if(u&2){let t,r,o=m();p(11),x("value",(t=o.editingProject())==null?null:t.name),p(7),v((r=o.editingProject())==null?null:r.description)}}function oe(u,e){if(u&1){let t=_();n(0,"div",21),a("click",function(){l(t);let o=m();return d(o.onCancelDelete())}),n(1,"div",31),a("click",function(o){return l(t),d(o.stopPropagation())}),n(2,"div",32)(3,"span",6),c(4,"warning"),i()(),n(5,"h3"),c(6,"\u05DE\u05D7\u05D9\u05E7\u05EA \u05E4\u05E8\u05D5\u05D9\u05E7\u05D8"),i(),n(7,"p"),c(8,"\u05D4\u05D0\u05DD \u05D0\u05EA\u05D4 \u05D1\u05D8\u05D5\u05D7 \u05E9\u05D1\u05E8\u05E6\u05D5\u05E0\u05DA \u05DC\u05DE\u05D7\u05D5\u05E7 \u05D0\u05EA \u05D4\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8? "),y(9,"br"),n(10,"strong"),c(11,"\u05DB\u05DC \u05D4\u05DE\u05E9\u05D9\u05DE\u05D5\u05EA \u05D5\u05D4\u05E0\u05EA\u05D5\u05E0\u05D9\u05DD \u05D9\u05DE\u05D7\u05E7\u05D5 \u05DC\u05E6\u05DE\u05D9\u05EA\u05D5\u05EA!"),i()(),n(12,"div",33)(13,"button",34),a("click",function(){l(t);let o=m();return d(o.onCancelDelete())}),c(14,"\u05D1\u05D9\u05D8\u05D5\u05DC"),i(),n(15,"button",35),a("click",function(){l(t);let o=m();return d(o.onConfirmDelete())}),c(16,"\u05DE\u05D7\u05E7 \u05DC\u05E6\u05DE\u05D9\u05EA\u05D5\u05EA"),i()()()()}}var Q=class u{route=D(R);projectsService=D(E);fb=D(G);allProjects=M(this.projectsService.projects$,{initialValue:[]});params=M(this.route.paramMap);showEditDialog=f(!1);editingProject=f(null);showDeleteConfirm=f(!1);projectIdToDelete=f(null);projectNameControl=this.fb.control("",B.required);ngOnInit(){this.projectsService.loadProjects()}teamProjects=j(()=>{let e=this.params(),t=this.allProjects(),r=e?.get("teamId");return!r||!t?[]:t.filter(o=>String(o.team_id)===String(r))});currentTeamId=j(()=>this.params()?.get("teamId"));createProject(){let e=this.currentTeamId();if(this.projectNameControl.valid&&e){let t={name:this.projectNameControl.value,teamId:Number(e)};this.projectsService.createProject(t).subscribe({next:()=>{this.projectNameControl.reset(),this.projectsService.loadProjects()},error:r=>console.error(r)})}}onEditProject(e){this.editingProject.set(e),this.showEditDialog.set(!0)}onSaveProject(e){let t=this.editingProject()?.id;t&&this.projectsService.updateProject(t,e).subscribe({next:()=>{this.showEditDialog.set(!1),this.editingProject.set(null),this.projectsService.loadProjects()},error:r=>{console.error("Error updating project:",r),alert("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E2\u05D3\u05DB\u05D5\u05DF \u05D4\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8")}})}onDeleteProject(e){this.projectIdToDelete.set(e),this.showDeleteConfirm.set(!0)}onConfirmDelete(){let e=this.projectIdToDelete();e&&this.projectsService.deleteProject(e).subscribe({next:()=>{this.projectsService.loadProjects(),this.onCancelDelete()},error:t=>{console.error("Error deleting project:",t),this.onCancelDelete()}})}onCancelDelete(){this.showDeleteConfirm.set(!1),this.projectIdToDelete.set(null)}onCancelEdit(){this.showEditDialog.set(!1),this.editingProject.set(null)}static \u0275fac=function(t){return new(t||u)};static \u0275cmp=V({type:u,selectors:[["app-projects-list"]],decls:21,vars:5,consts:[["nameInput",""],["descInput",""],[1,"projects-container"],[1,"projects-header-row"],[1,"title-section"],["routerLink","/teams",1,"back-btn"],[1,"material-symbols-outlined"],[1,"create-project-form"],["placeholder","\u05E9\u05DD \u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05D7\u05D3\u05E9...",3,"keydown.enter","formControl"],[1,"btn-create-p",3,"click","disabled"],[1,"projects-grid"],[1,"project-card"],[1,"empty-projects"],[1,"modal-overlay"],[1,"project-main-link",3,"routerLink"],[1,"project-icon-wrapper"],[1,"project-text"],[1,"project-card-actions"],["title","\u05E2\u05E8\u05D9\u05DB\u05D4",1,"p-action-btn","edit",3,"click"],["title","\u05DE\u05D7\u05D9\u05E7\u05D4",1,"p-action-btn","delete",3,"click"],[1,"material-symbols-outlined","large-icon"],[1,"modal-overlay",3,"click"],[1,"modal-card",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"input-group"],["type","text",3,"value"],["rows","4"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"confirm-card","delete-warning",3,"click"],[1,"confirm-icon"],[1,"confirm-actions"],[1,"btn-secondary",3,"click"],[1,"btn-danger-confirm",3,"click"]],template:function(t,r){t&1&&(n(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5)(4,"span",6),c(5,"arrow_forward"),i(),c(6," \u05D7\u05D6\u05E8\u05D4 \u05DC\u05E6\u05D5\u05D5\u05EA\u05D9\u05DD "),i(),n(7,"h2"),c(8,"\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8\u05D9\u05DD \u05D1\u05E6\u05D5\u05D5\u05EA"),i()(),n(9,"div",7)(10,"input",8),a("keydown.enter",function(){return r.createProject()}),i(),n(11,"button",9),a("click",function(){return r.createProject()}),n(12,"span",6),c(13,"add_circle"),i(),c(14," \u05E6\u05D5\u05E8 \u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 "),i()()(),n(15,"div",10),L(16,te,17,5,"div",11,ee,!1,ne,5,0,"div",12),i()(),P(19,re,24,2,"div",13),P(20,oe,17,0,"div",13)),t&2&&(p(10),x("formControl",r.projectNameControl),p(),x("disabled",r.projectNameControl.invalid),p(5),N(r.teamProjects()),p(3),w(r.showEditDialog()?19:-1),p(),w(r.showDeleteConfirm()?20:-1))},dependencies:[F,J,z,H,Y,q],styles:[".projects-container[_ngcontent-%COMP%]{max-width:1200px;margin:40px auto;padding:0 20px;direction:rtl;font-family:Segoe UI,system-ui,sans-serif}.projects-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:40px;border-bottom:2px solid #e2e8f0;padding-bottom:25px}.back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#2d9d8e;text-decoration:none;font-weight:700;font-size:.9rem;margin-bottom:10px}.title-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1a202c;font-size:2.2rem;font-weight:800}.create-project-form[_ngcontent-%COMP%]{display:flex;gap:12px}.create-project-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 18px;border:2px solid #e2e8f0;border-radius:10px;width:250px;font-family:inherit}.btn-create-p[_ngcontent-%COMP%]{background-color:#2d9d8e;color:#fff;border:none;padding:10px 20px;border-radius:10px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:8px;transition:.2s}.btn-create-p[_ngcontent-%COMP%]:hover{background-color:#248277}.projects-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:25px}.project-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:25px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 12px #00000008;border-right:6px solid #2d9d8e;transition:all .3s ease;position:relative}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 24px #2d9d8e1a}.project-main-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex:1}.project-icon-wrapper[_ngcontent-%COMP%]{background:#f0fdfa;color:#2d9d8e;width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center}.project-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;color:#1a202c;font-size:1.25rem}.project-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:.9rem}.project-card-actions[_ngcontent-%COMP%]{display:flex;gap:8px;opacity:0;transition:.2s}.project-card[_ngcontent-%COMP%]:hover   .project-card-actions[_ngcontent-%COMP%]{opacity:1}.p-action-btn[_ngcontent-%COMP%]{background:#f8fafc;border:none;width:38px;height:38px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#64748b;transition:.2s}.p-action-btn.edit[_ngcontent-%COMP%]:hover{color:#2d9d8e;background:#f0fdfa}.p-action-btn.delete[_ngcontent-%COMP%]:hover{color:#ef4444;background:#fef2f2}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0f172a99;display:flex;justify-content:center;align-items:center;z-index:2000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-card[_ngcontent-%COMP%]{background:#fff;width:90%;max-width:500px;border-radius:20px;overflow:hidden;box-shadow:0 25px 50px -12px #00000040}.modal-header[_ngcontent-%COMP%]{background:#1a202c;color:#fff;padding:20px 25px;display:flex;align-items:center;gap:12px}.modal-body[_ngcontent-%COMP%]{padding:30px}.input-group[_ngcontent-%COMP%]{margin-bottom:20px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700;color:#4a5568}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e2e8f0;border-radius:10px;font-family:inherit}.modal-footer[_ngcontent-%COMP%]{padding:20px 30px;background:#f8fafc;display:flex;justify-content:flex-end;gap:12px}.btn-save[_ngcontent-%COMP%]{background:#2d9d8e;color:#fff;border:none;padding:10px 25px;border-radius:8px;font-weight:700;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background:#f72626;color:#fff;border:none;padding:10px 25px;border-radius:8px;font-weight:700;cursor:pointer}.confirm-card.delete-warning[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:20px;max-width:400px;width:90%;text-align:center;box-shadow:0 20px 25px -5px #0003}.confirm-icon[_ngcontent-%COMP%]{background-color:#fef2f2;color:#ef4444;width:70px;height:70px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px}.confirm-icon[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:40px}.confirm-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1a202c;font-size:1.5rem;margin-bottom:10px}.confirm-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;line-height:1.6;margin-bottom:30px}.confirm-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-secondary[_ngcontent-%COMP%]{flex:1;padding:12px;background:#f1f5f9;border:none;border-radius:10px;font-weight:700;color:#475569;cursor:pointer;transition:.2s}.btn-danger-confirm[_ngcontent-%COMP%]{flex:1;padding:12px;background:#ef4444;color:#fff;border:none;border-radius:10px;font-weight:700;cursor:pointer;transition:.2s}.btn-danger-confirm[_ngcontent-%COMP%]:hover{background:#dc2626;box-shadow:0 4px 12px #ef44444d}"]})};export{Q as ProjectsList};
